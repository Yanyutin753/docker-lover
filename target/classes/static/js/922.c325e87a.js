"use strict";(self["webpackChunkyy2"]=self["webpackChunkyy2"]||[]).push([[922],{7120:function(e,t,a){a.r(t),a.d(t,{default:function(){return ae}});var l=a(2876),n=(a(2278),a(458)),o=a(6252),s=a(2262),i=a(8443),r=a(4719),u=a(6846),c=a(2639),d=a(5417),h=a(590),m=a(8714),v=a(4409),g=a(9070);const w={height:(0,i.SI)(0),anchors:(0,i.Ce)(),duration:(0,i.SI)(.2),contentDraggable:i.J5,lockScroll:Boolean,safeAreaInsetBottom:i.J5},[f,p]=(0,r["do"])("floating-panel");var y=(0,o.aZ)({name:f,props:w,emits:["heightChange","update:height"],setup(e,{emit:t,slots:a}){const l=.2,n=(0,s.iH)(),i=(0,s.iH)(),r=(0,g.T)((()=>+e.height),(e=>t("update:height",e))),w=(0,o.Fl)((()=>{var t,a;return{min:null!=(t=e.anchors[0])?t:100,max:null!=(a=e.anchors[e.anchors.length-1])?a:Math.round(.6*u.uK.value)}})),f=(0,o.Fl)((()=>e.anchors.length>=2?e.anchors:[w.value.min,w.value.max])),y=(0,s.iH)(!1),_=(0,o.Fl)((()=>({height:(0,c.Nn)(w.value.max),transform:`translateY(calc(100% + ${(0,c.Nn)(-r.value)}))`,transition:y.value?"none":`transform ${e.duration}s`}))),b=e=>{const t=Math.abs(e),{min:a,max:n}=w.value;return t>n?-(n+(t-n)*l):t<a?-(a-(a-t)*l):e};let k,S=-1;const I=(0,v.o)(),H=e=>{I.start(e),y.value=!0,k=-r.value,S=-1},x=t=>{var a;I.move(t);const l=t.target;if(i.value===l||(null==(a=i.value)?void 0:a.contains(l))){const{scrollTop:a}=i.value;if(S=Math.max(S,a),!e.contentDraggable)return;if(-k<w.value.max)(0,u.PF)(t,!0);else if(!(a<=0&&I.deltaY.value>0)||S>0)return}const n=I.deltaY.value+k;r.value=-b(n)},W=()=>{S=-1,y.value=!1,r.value=(0,d.o)(f.value,r.value),r.value!==-k&&t("heightChange",{height:r.value})};return(0,o.YP)(w,(()=>{r.value=(0,d.o)(f.value,r.value)}),{immediate:!0}),(0,m.F)(n,(()=>e.lockScroll)),(0,h.OR)("touchmove",x,{target:n}),()=>{var t;return(0,o.Wm)("div",{class:[p(),{"van-safe-area-bottom":e.safeAreaInsetBottom}],ref:n,style:_.value,onTouchstartPassive:H,onTouchend:W,onTouchcancel:W},[(0,o.Wm)("div",{class:p("header")},[(0,o.Wm)("div",{class:p("header-bar")},null)]),(0,o.Wm)("div",{class:p("content"),ref:i},[null==(t=a.default)?void 0:t.call(a)])])}}});const _=(0,n.n)(y);a(1958);var b=a(5185),k=(a(3349),a(6907)),S=(a(4746),a(6773)),I=(a(487),a(3164)),H=(a(6335),a(8480)),x=(a(5590),a(1206)),W=(a(103),a(6233));a(9840);const j=e=>((0,o.dD)("data-v-d1bf87f0"),e=e(),(0,o.Cn)(),e),U={class:"content_login"},C={style:{"z-index":"1"}},Y=["src"],M={style:{display:"flex","justify-content":"center","align-items":"center"}},V={key:0},z={key:1},F={style:{"z-index":"1",height:"100vh"}},T=j((()=>(0,o._)("div",{style:{display:"flex","justify-content":"center",transform:"translateY(-26.5px)","z-index":"2",overflow:"hidden"}},[(0,o._)("h4",{style:{"line-height":"0","font-size":"10vw"}},"Login on KABI")],-1))),B={style:{display:"flex","justify-content":"center","align-items":"center",transform:"translateY(-3vh)",overflow:"hidden"}},D=j((()=>(0,o._)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0,user-scalable=no"},null,-1))),O={style:{"text-align":"center",width:"80vw",padding:"10vw"}},P={style:{display:"flex","justify-content":"center","align-items":"center",transform:"translateY(-2vh)",width:"80vw\r\n          overflow: hidden"}},E={style:{"margin-top":"2.5vw",overflow:"hidden"}},N={style:{margin:"2.5vw",overflow:"hidden",transform:"translateY(1vw)"}},A={style:{"justify-content":"center",transform:"translateY(-2vw)"}},K=j((()=>(0,o._)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Young+Serif"},null,-1)));function L(e,t,a,n,s,i){const r=W.j,u=x.oF,c=H.Ee,d=I.gN,h=(0,o.up)("h9"),m=S.XZ,v=(0,o.up)("h7"),g=k.zx,w=(0,o.up)("router-link"),f=b.l0,p=_,y=l.Vq;return(0,o.wg)(),(0,o.iD)(o.HY,null,[(0,o._)("div",U,[(0,o._)("div",C,[(0,o.Wm)(u,{autoplay:4e3,"indicator-color":"#F19290","lazy-render":""},{default:(0,o.w5)((()=>[((0,o.wg)(!0),(0,o.iD)(o.HY,null,(0,o.Ko)(n.images,(e=>((0,o.wg)(),(0,o.j4)(r,{key:e},{default:(0,o.w5)((()=>[(0,o._)("img",{src:e,style:{width:"100vw",height:"110vh"}},null,8,Y)])),_:2},1024)))),128))])),_:1})])]),(0,o._)("div",{class:"wrapper_login",onClick:t[0]||(t[0]=(...e)=>n.loginButton&&n.loginButton(...e))},[(0,o._)("div",M,[n.height==n.calculatedHeight?((0,o.wg)(),(0,o.iD)("h6",V,"WELCOME")):((0,o.wg)(),(0,o.iD)("h4",z,"Click It"))])]),(0,o._)("div",F,[(0,o.Wm)(p,{height:n.height,"onUpdate:height":t[4]||(t[4]=e=>n.height=e),anchors:n.anchors},{default:(0,o.w5)((()=>[T,(0,o._)("div",B,[(0,o.Wm)(c,{width:"83%",height:"5%",fit:"contain",position:"center",src:n.image},null,8,["src"])]),D,(0,o._)("div",O,[(0,o._)("div",P,[(0,o.Wm)(f,{onSubmit:n.onSubmit},{default:(0,o.w5)((()=>[(0,o.Wm)(d,{modelValue:n.username,"onUpdate:modelValue":t[1]||(t[1]=e=>n.username=e),name:"用户名",label:"🦄用户名",placeholder:"用户名",rules:[{required:!0,message:"请填写用户名"}]},null,8,["modelValue"]),(0,o.Wm)(d,{modelValue:n.password,"onUpdate:modelValue":t[2]||(t[2]=e=>n.password=e),type:"password",name:"密码",label:"🔑密码",placeholder:"密码",rules:[{required:!0,message:"请填写密码"}]},null,8,["modelValue"]),(0,o._)("div",E,[(0,o.Wm)(m,{class:"remember",modelValue:n.checked,"onUpdate:modelValue":t[3]||(t[3]=e=>n.checked=e),"checked-color":"#F19290","icon-size":"3.5vw"},{default:(0,o.w5)((()=>[(0,o.Wm)(h,{style:{"font-size":"3.5vw",color:"#f19290",transform:"translate(17px, 0px)"}},{default:(0,o.w5)((()=>[(0,o.Uk)("记住密码")])),_:1})])),_:1},8,["modelValue"])]),(0,o._)("div",N,[(0,o.Wm)(g,{size:"large",round:"",block:"",color:"#F19290","native-type":"submit"},{default:(0,o.w5)((()=>[(0,o.Wm)(v,null,{default:(0,o.w5)((()=>[(0,o.Uk)("LOGIN IN KABI'S HOUSE")])),_:1})])),_:1})]),(0,o._)("div",A,[(0,o._)("h5",null,[(0,o.Uk)(" Don't have an account? "),(0,o.Wm)(w,{replace:"",to:"/userAdd",class:"custom-link"},{default:(0,o.w5)((()=>[(0,o.Uk)("Sign up")])),_:1})])])])),_:1},8,["onSubmit"])])])])),_:1},8,["height","anchors"])]),(0,o.Wm)(y,{show:n.show,"onUpdate:show":t[5]||(t[5]=e=>n.show=e),title:"😭提示",message:"账号或密码错误"},null,8,["show"]),(0,o.Wm)(y,{show:n.show_1,"onUpdate:show":t[6]||(t[6]=e=>n.show_1=e),title:"🥰恭喜",message:"登录成功！",width:"70vw",height:"30vw","show-cancel-button":!1,"show-confirm-button":!1},null,8,["show"]),K],64)}var R=a(2119),q=a.p+"img/love.a5763c43.gif",J=a.p+"img/login1.7fa2964a.gif",Z=a.p+"img/login2.797c47a5.jpg",$=a.p+"img/login3.7f322b7c.jpg",G=a.p+"img/login4.754ed326.jpg",X=a.p+"img/login6.ef559846.jpg",Q={setup(){const e=(0,s.iH)("Click It"),t=[J,G,X,Z,$],a=(0,s.iH)(!1),l=q,n=(0,s.iH)(!1),i=(0,s.iH)(!1),r=[Math.round(0*window.innerHeight),Math.round(.895*window.innerHeight)],u=(0,s.iH)(r[0]),c=(0,s.iH)(""),d=(0,s.iH)(""),h=(0,R.tv)(),m=(0,s.iH)(Math.round(.895*window.innerHeight));(0,o.bv)((()=>{const e=localStorage.getItem("savedUsername"),t=localStorage.getItem("savedPassword"),l=localStorage.getItem("savedRemember");"true"===l&&(c.value=e||"",d.value=t||"",a.value=!0)}));let v=0;const g=()=>{v=!v,1==v?(e.value="WELCOME",u.value=Math.round(.895*window.innerHeight)):(e.value="Click It",u.value=Math.round(0*window.innerHeight))},w=()=>{a.value?(localStorage.setItem("savedUsername",c.value),localStorage.setItem("savedPassword",d.value),localStorage.setItem("savedRemember","true")):(localStorage.removeItem("savedUsername"),localStorage.removeItem("savedPassword"),localStorage.removeItem("savedRemember"));const e={name:c.value,password:d.value};fetch("/api/login",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{if(1==e.code){console.log("登录成功",e.data),i.value=!0,setTimeout((()=>{h.replace("/")}),1e3);const t=e.data;localStorage.setItem("jwtToken",t)}else n.value=!0,console.error("登录失败")})).catch((e=>{n.value=!0,console.error("登录时出现错误:",e)}))};return{calculatedHeight:m,title:e,loginButton:g,images:t,anchors:r,height:u,checked:a,show:n,show_1:i,username:c,password:d,onSubmit:w,image:l}}},ee=a(3744);const te=(0,ee.Z)(Q,[["render",L],["__scopeId","data-v-d1bf87f0"]]);var ae=te},5590:function(e,t,a){a(1958),a(368),a(6742),a(7179)}}]);
//# sourceMappingURL=922.c325e87a.js.map