"use strict";(self["webpackChunkyy2"]=self["webpackChunkyy2"]||[]).push([[270],{6245:function(e,o,t){function n(e){this.message=e}n.prototype=new Error,n.prototype.name="InvalidCharacterError";var a="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var o=String(e).replace(/=+$/,"");if(o.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,a,l=0,r=0,i="";a=o.charAt(r++);~a&&(t=l%4?64*t+a:a,l++%4)?i+=String.fromCharCode(255&t>>(-2*l&6)):0)a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(a);return i};function l(e){var o=e.replace(/-/g,"+").replace(/_/g,"/");switch(o.length%4){case 0:break;case 2:o+="==";break;case 3:o+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(a(e).replace(/(.)/g,(function(e,o){var t=o.charCodeAt(0).toString(16).toUpperCase();return t.length<2&&(t="0"+t),"%"+t})))}(o)}catch(e){return a(o)}}function r(e){this.message=e}function i(e,o){if("string"!=typeof e)throw new r("Invalid token specified");var t=!0===(o=o||{}).header?0:1;try{return JSON.parse(l(e.split(".")[t]))}catch(e){throw new r("Invalid token specified: "+e.message)}}r.prototype=new Error,r.prototype.name="InvalidTokenError",o.Z=i},3427:function(e,o,t){t.r(o),t.d(o,{default:function(){return le}});var n=t(8521),a=(t(3300),t(2771)),l=(t(2824),t(5601)),r=(t(8001),t(6018)),i=(t(9722),t(6907)),c=(t(4746),t(8515)),s=(t(1588),t(5865)),u=(t(9246),t(8480)),d=(t(5590),t(294)),m=(t(6870),t(3579)),p=(t(492),t(7441)),h=(t(9846),t(157)),g=(t(1897),t(2876)),f=(t(2278),t(1116)),v=(t(8825),t(1206)),w=(t(103),t(6233)),b=(t(9840),t(6252)),k=t(3577);const _={class:"content_produce"},W={class:"produce"},y=["src"],C=(0,b._)("br",null,null,-1),x=(0,b._)("br",null,null,-1),I=(0,b._)("br",null,null,-1),H=(0,b._)("br",null,null,-1),U={style:{transform:"translate(0px, 2px)"}},S={action:"/"},L=(0,b._)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0,user-scalable=no"},null,-1),T={key:0},F={style:{transform:"translate(0px, -10px)"}},P={key:1},Z={style:{transform:"translate(6px, -3px)"}},z={style:{"margin-top":"12px","margin-bottom":"12px",position:"relative",overflow:"hidden",cursor:"grab","background-color":"#fff","box-shadow":"0px 0px 5px rgba(0, 0, 0, 0.025)","border-radius":"10px",width:"96%",transform:"translateX(2%)"}},q={style:{transform:"translate(-3px, -3px)","font-size":"14px"}},$={key:0,style:{transform:"translate(calc(96vw - 105px), -6px)",opacity:"0.3"}},j={style:{transform:"translate(4px, 4.5px)"}},D={style:{"margin-left":"10px"}},O=(0,b._)("br",null,null,-1),V={class:"circle-wrapper"},E=["src"],N=(0,b._)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css?family=Ma+Shan+Zheng"},null,-1);function B(e,o,t,B,X,A){const Q=w.j,Y=v.oF,R=f.gb,J=g.Vq,K=h.ol,M=p.e$,G=m.HY,ee=d.JO,oe=u.Ee,te=s.Vp,ne=c.Zb,ae=i.zx,le=r.Q1,re=l.kF,ie=a.QP,ce=n.Er;return(0,b.wg)(),(0,b.iD)(b.HY,null,[(0,b._)("div",_,[(0,b._)("div",W,[((0,b.wg)(),(0,b.j4)(b.Ob,null,[(0,b.Wm)(Y,{autoplay:3e3,"indicator-color":"#F19290","lazy-render":""},{default:(0,b.w5)((()=>[((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(B.images,(e=>((0,b.wg)(),(0,b.j4)(Q,{key:e},{default:(0,b.w5)((()=>[(0,b._)("img",{src:e,style:{width:"100%",height:"62.5vw"}},null,8,y)])),_:2},1024)))),128))])),_:1})],1024)),(0,b.Wm)(J,{show:B.show_7,"onUpdate:show":o[0]||(o[0]=e=>B.show_7=e),"show-cancel-button":!1,"show-confirm-button":!1,width:"50vw"},{default:(0,b.w5)((()=>[C,x,(0,b.Wm)(R,{size:"10vw",vertical:"","text-size":"4vw",color:"#f19290"},{default:(0,b.w5)((()=>[(0,b.Uk)("🚀拼命加载中...")])),_:1}),I,H])),_:1},8,["show"]),(0,b._)("div",U,[(0,b._)("form",S,[L,(0,b.Wm)(K,{modelValue:B.value,"onUpdate:modelValue":o[1]||(o[1]=e=>B.value=e),shape:"round",background:"rgb(250 250 250 / 22%)",placeholder:"请输入搜索商品关键词",onSearch:B.onSearch},null,8,["modelValue","onSearch"])])]),(0,b.Wm)(M,{offset:B.offset_produce,"onUpdate:offset":o[2]||(o[2]=e=>B.offset_produce=e),axis:"xy",icon:"add-o",onClick:B.onClick},null,8,["offset","onClick"]),0===B.produceList.length?((0,b.wg)(),(0,b.iD)("div",T,[(0,b._)("div",F,[(0,b.Wm)(G,{"image-size":"17rem",description:"😭暂无找到该商品，快去购买一个吧！"})])])):(0,b.kq)("",!0),B.produceList.length>0?((0,b.wg)(),(0,b.iD)("div",P,[(0,b._)("div",Z,[(0,b._)("h1",null,[(0,b.Uk)(" 🎁 购买商品 "),(0,b.Wm)(ee,{name:"point-gift-o",badge:B.produceList.length.toString(),"badge-props":{color:"#ee575e"}},null,8,["badge"])])]),((0,b.wg)(!0),(0,b.iD)(b.HY,null,(0,b.Ko)(B.produceList,((e,o)=>((0,b.wg)(),(0,b.iD)("div",{key:o},[(0,b._)("div",z,[(0,b.Wm)(le,null,{right:(0,b.w5)((()=>[(0,b._)("div",D,[(0,b.Wm)(ae,{square:"",icon:"gold-coin-o",color:"#50A7D9",class:"button_produce",onClick:t=>B.buyItem(e.produceId,o,e)},null,8,["onClick"]),(0,b.Wm)(ae,{square:"",icon:"star-o",color:"#FFE1B2",class:"button_produce",onClick:o=>B.loveItem(e)},null,8,["onClick"]),(0,b.Wm)(ae,{square:"",icon:"delete-o",color:"#F19290",class:"button_produce",onClick:t=>B.deleteItem(e.produceId,o,e)},null,8,["onClick"])])])),default:(0,b.w5)((()=>[(0,b.Wm)(ne,{price:B.formatNumber(e.produceCredit),desc:B.truncateText(e),title:e.produceName,class:"goods-card",thumb:e.produceImage,currency:"💰",onClick:o=>B.disPlay(e.produceId)},{price:(0,b.w5)((()=>[(0,b._)("div",q," 💰"+(0,k.zw)(B.formatNumber(e.produceCredit)),1)])),tag:(0,b.w5)((()=>[e.checkLove%2==1?((0,b.wg)(),(0,b.iD)("div",$,[(0,b.Wm)(oe,{src:B.imageUrl1,width:"85",height:"80",class:"image-slider"},null,8,["src"])])):(0,b.kq)("",!0)])),tags:(0,b.w5)((()=>[(0,b.Wm)(te,{plain:"",color:"#F19290"},{default:(0,b.w5)((()=>[(0,b.Uk)("出售给")])),_:1}),(0,b.Wm)(te,{plain:"",color:"#F19290"},{default:(0,b.w5)((()=>[(0,b.Uk)((0,k.zw)(e.customer),1)])),_:2},1024)])),num:(0,b.w5)((()=>[(0,b._)("div",j," x"+(0,k.zw)(e.produceNum),1)])),_:2},1032,["price","desc","title","thumb","onClick"])])),_:2},1024)])])))),128)),O,(0,b.Wm)(J,{show:B.show_1,"onUpdate:show":o[3]||(o[3]=e=>B.show_1=e),onConfirm:B.handleConfirm,onCancel:B.handleCancel,title:"🥰 温馨提示",message:"🦄您确定已经删除这件商品吗，删除之后就找不到咯，请您要仔细认真考虑哦！","show-cancel-button":""},null,8,["show","onConfirm","onCancel"]),(0,b.Wm)(J,{show:B.show_2,"onUpdate:show":o[4]||(o[4]=e=>B.show_2=e),onConfirm:B.checkConfirm,onCancel:B.checkCancel,title:"🥰 温馨提示",message:"🦄您确定要购买这件商品了嘛？","show-cancel-button":""},null,8,["show","onConfirm","onCancel"]),(0,b.Wm)(J,{show:B.show_3,"onUpdate:show":o[5]||(o[5]=e=>B.show_3=e),title:"购买商品失败",message:"😭您的积分不够，快去完成任务获取积分吧啊💪","show-cancel-button":""},null,8,["show"]),(0,b.Wm)(J,{show:B.show_5,"onUpdate:show":o[6]||(o[6]=e=>B.show_5=e),title:"🥰 温馨提示",message:"😂您不能删除别人创建的商品哦，快去完成自己的任务，购买商品吧！"},null,8,["show"]),(0,b.Wm)(J,{show:B.show_6,"onUpdate:show":o[7]||(o[7]=e=>B.show_6=e),title:"🥰 温馨提示",message:"😂您不能购买别人的专属商品哦，快去完成自己的任务，购买属于自己的商品吧！"},null,8,["show"]),(0,b.Wm)(J,{show:B.show_8,"onUpdate:show":o[8]||(o[8]=e=>B.show_8=e),title:"🥰恭喜",message:B.message,width:"70vw",height:"30vw","close-on-click-overlay":!0,"show-cancel-button":!1,"show-confirm-button":!1},null,8,["show","message"]),(0,b.Wm)(re,{right:"83vw",bottom:"10vh"})])):(0,b.kq)("",!0)]),(0,b.Wm)(ce,{modelValue:B.active,"onUpdate:modelValue":o[9]||(o[9]=e=>B.active=e),"active-color":"#F19290","safe-area-inset-bottom":!0},{default:(0,b.w5)((()=>[(0,b.Wm)(ie,{replace:"",to:"/Task",icon:"coupon-o"},{default:(0,b.w5)((()=>[(0,b.Uk)("任务")])),_:1}),(0,b.Wm)(ie,{replace:"",to:"/Produce",icon:"shop-collect-o"},{default:(0,b.w5)((()=>[(0,b.Uk)("商城")])),_:1}),(0,b._)("div",V,[(0,b.Wm)(ie,{replace:"",to:"/"},{icon:(0,b.w5)((e=>[(0,b._)("img",{class:"homeIcon",src:e.active?B.icon.active:B.icon.inactive},null,8,E)])),_:1})]),(0,b.Wm)(ie,{replace:"",to:"/Room",icon:"cart-o"},{default:(0,b.w5)((()=>[(0,b.Uk)("仓库")])),_:1}),(0,b.Wm)(ie,{replace:"",to:"/User",icon:"user-o"},{default:(0,b.w5)((()=>[(0,b.Uk)("我的")])),_:1})])),_:1},8,["modelValue"])]),N],64)}var X=t(2262),A=t(2119),Q=t(6154),Y=t(1407),R=t(6245),J=t.p+"img/produce1.50041cc5.jpg",K=t.p+"img/produce2.240f46fd.jpg",M=t.p+"img/produce3.2059f055.jpg",G=t(2914),ee=t(3833),oe=t(4514),te={setup(){const e={active:G,inactive:ee},o=[oe],t=[Y],n=(0,X.iH)(!1),a=(0,X.iH)(!1),l=(0,X.iH)(!1),r=(0,X.iH)(!1),i=(0,X.iH)(!1),c=(0,X.iH)(!1),s=(0,X.iH)(!1),u=(0,X.iH)(""),d=(0,X.iH)(1),m=(0,A.tv)(),p=(0,X.iH)(!0),h=e=>{m.replace(`/ProduceDisplay/${e}`)},g=[J,K,M];var f=.74*window.innerHeight,v=.75*window.innerWidth;const w=(0,X.iH)({x:v,y:f}),k=()=>{m.replace("/produceAdd/1")},_=(0,X.iH)([]),W=(0,X.iH)(""),y=W.value,C=e=>{p.value=!0,S(e)};(0,b.bv)((()=>{U(),C(y)}));const x=localStorage.getItem("jwtToken");x||m.replace("/login");const I={Authorization:`Bearer ${x}`};let H="";const U=()=>{Q.Z.post("/api/loginToken?token="+x).then((e=>{if(0==e.data.code)return console.error(e.data.data),void m.replace("/login");console.log(e.data.data);const o=(0,R.Z)(x);H=o.id})).catch((e=>{console.error("请求loginToken接口失败",e),m.replace("/login")}))},S=e=>{console.log("Before fetching data. produceList:",_.value),Q.Z.get(`/api/nameSelectProduce?name=${e}`,{headers:I}).then((e=>{_.value=e.data.data,console.log("Data fetched successfully. produceList:",_.value),p.value=!1})).catch((e=>{console.error("Failed to fetch data:",e)}))};let L="",T="",F="";const P=(e,o,t)=>{t.founderId==H?(L=e,T=o,n.value=!0):i.value=!0},Z=()=>{p.value=!0,q(L,T)},z=()=>{},q=(e,o)=>{Q.Z.delete(`/api/deleteProduce?id=${e}`,{headers:I}).then((e=>{console.log("数据删除成功",e),_.value.splice(o,1),u.value="删除成功!"})).catch((e=>{console.error("数据删除失败",e),u.value="删除失败!"})),s.value=!0,setTimeout((()=>{s.value=!1}),1e3),p.value=!1},$=(e,o,t)=>{Q.Z.get(`/api/selectCredit?name=${t.customer}`,{headers:I}).then((n=>{const l=n.data.data.nameId;l==H?(L=e,T=o,F=t,a.value=!0):c.value=!0}))},j=()=>{p.value=!0,O(L,T,F)},D=()=>{},O=(e,o,t)=>{Q.Z.get(`/api/selectCredit?name=${t.customer}`,{headers:I}).then((o=>{console.log("获取数据成功",o);const n=o.data.data.credit;n>=t.produceCredit?Q.Z.put(`/api/buyProduce?id=${e}`,null,{headers:I}).then((e=>{console.log("任务已保存成功",e.data),p.value=!1,u.value="购买成功！",t.produceNum=t.produceNum-1})).catch((e=>{console.error("数据完成失败",e),u.value="购买失败！"})):l.value=!0})).catch((e=>{console.error("获取数据失败",e)})),s.value=!0,setTimeout((()=>{s.value=!1}),1e3),p.value=!1},V=()=>{r.value=!0},E=e=>null===e||void 0===e?"":e.toFixed(2),N=e=>e.checkLove%2==1?e.produceText.substring(0,13)+"...":e.produceText,B=e=>{Q.Z.get(`/api/updateLoveProduce?id=${e.produceId}`,{headers:I}).then((o=>{e.checkLove=!e.checkLove,c.value=!1,console.log("数据收藏成功",o)})).catch((e=>{console.error("Failed to fetch data:",e)}))};return{formatNumber:E,icon:e,image:t,disPlay:h,show_1:n,show_2:a,show_3:l,show_4:r,show_5:i,show_6:c,goodItem:V,show_7:p,show_8:s,message:u,value:W,offset_produce:w,onClick:k,handleConfirm:Z,handleCancel:z,checkConfirm:j,checkCancel:D,deleteItem:P,buyItem:$,produceList:_,onSearch:C,active:d,images:g,truncateText:N,loveItem:B,imageUrl1:o}}},ne=t(3744);const ae=(0,ne.Z)(te,[["render",B]]);var le=ae},2914:function(e,o,t){e.exports=t.p+"img/HomeIconColor.edbf1c03.jpg"},3833:function(e,o,t){e.exports=t.p+"img/HomeIconGrey.94dd5e26.jpg"},4514:function(e,o,t){e.exports=t.p+"img/task1.22c274a2.jpg"},1407:function(e,o,t){e.exports=t.p+"img/3.29ea4270.gif"},8515:function(e,o,t){t.d(o,{Zb:function(){return h}});var n=t(458),a=t(6252),l=t(4719),r=t(8443),i=t(293),c=t(5865),s=t(8480);const[u,d]=(0,l["do"])("card"),m={tag:String,num:r.Or,desc:String,thumb:String,title:String,price:r.Or,centered:Boolean,lazyLoad:Boolean,currency:(0,r.SQ)("¥"),thumbLink:String,originPrice:r.Or};var p=(0,a.aZ)({name:u,props:m,emits:["clickThumb"],setup(e,{slots:o,emit:t}){const n=()=>o.title?o.title():e.title?(0,a.Wm)("div",{class:[d("title"),"van-multi-ellipsis--l2"]},[e.title]):void 0,l=()=>{if(o.tag||e.tag)return(0,a.Wm)("div",{class:d("tag")},[o.tag?o.tag():(0,a.Wm)(c.Vp,{mark:!0,type:"primary"},{default:()=>[e.tag]})])},r=()=>o.thumb?o.thumb():(0,a.Wm)(s.Ee,{src:e.thumb,fit:"cover",width:"100%",height:"100%",lazyLoad:e.lazyLoad},null),u=()=>{if(o.thumb||e.thumb)return(0,a.Wm)("a",{href:e.thumbLink,class:d("thumb"),onClick:e=>t("clickThumb",e)},[r(),l()])},m=()=>o.desc?o.desc():e.desc?(0,a.Wm)("div",{class:[d("desc"),"van-ellipsis"]},[e.desc]):void 0,p=()=>{const o=e.price.toString().split(".");return(0,a.Wm)("div",null,[(0,a.Wm)("span",{class:d("price-currency")},[e.currency]),(0,a.Wm)("span",{class:d("price-integer")},[o[0]]),(0,a.Uk)("."),(0,a.Wm)("span",{class:d("price-decimal")},[o[1]])])};return()=>{var t,l,r;const c=o.num||(0,i.Xq)(e.num),s=o.price||(0,i.Xq)(e.price),h=o["origin-price"]||(0,i.Xq)(e.originPrice),g=c||s||h||o.bottom,f=s&&(0,a.Wm)("div",{class:d("price")},[o.price?o.price():p()]),v=h&&(0,a.Wm)("div",{class:d("origin-price")},[o["origin-price"]?o["origin-price"]():`${e.currency} ${e.originPrice}`]),w=c&&(0,a.Wm)("div",{class:d("num")},[o.num?o.num():`x${e.num}`]),b=o.footer&&(0,a.Wm)("div",{class:d("footer")},[o.footer()]),k=g&&(0,a.Wm)("div",{class:d("bottom")},[null==(t=o["price-top"])?void 0:t.call(o),f,v,w,null==(l=o.bottom)?void 0:l.call(o)]);return(0,a.Wm)("div",{class:d()},[(0,a.Wm)("div",{class:d("header")},[u(),(0,a.Wm)("div",{class:d("content",{centered:e.centered})},[(0,a.Wm)("div",null,[n(),m(),null==(r=o.tags)?void 0:r.call(o)]),k])]),b])}}});const h=(0,n.n)(p)},1588:function(e,o,t){t(1958),t(368),t(6742),t(7179),t(6585)},6870:function(e,o,t){t(1958),t(368),t(6742)},5590:function(e,o,t){t(1958),t(368),t(6742),t(7179)},6018:function(e,o,t){t.d(o,{Q1:function(){return b}});var n=t(458),a=t(6252),l=t(2262),r=t(4719),i=t(8443),c=t(293),s=t(6846),u=t(2639),d=t(2521),m=t(590),p=t(4409),h=t(3466);const[g,f]=(0,r["do"])("swipe-cell"),v={name:(0,i.SI)(""),disabled:Boolean,leftWidth:i.Or,rightWidth:i.Or,beforeClose:Function,stopPropagation:Boolean};var w=(0,a.aZ)({name:g,props:v,emits:["open","close","click"],setup(e,{emit:o,slots:t}){let n,r,i;const g=(0,l.iH)(),v=(0,l.iH)(),w=(0,l.iH)(),b=(0,l.qj)({offset:0,dragging:!1}),k=(0,p.o)(),_=e=>e.value?(0,m.EL)(e).width:0,W=(0,a.Fl)((()=>(0,c.Xq)(e.leftWidth)?+e.leftWidth:_(v))),y=(0,a.Fl)((()=>(0,c.Xq)(e.rightWidth)?+e.rightWidth:_(w))),C=t=>{b.offset="left"===t?W.value:-y.value,n||(n=!0,o("open",{name:e.name,position:t}))},x=t=>{b.offset=0,n&&(n=!1,o("close",{name:e.name,position:t}))},I=e=>{const o=Math.abs(b.offset),t=.15,a=n?1-t:t,l="left"===e?W.value:y.value;l&&o>l*a?C(e):x(e)},H=o=>{e.disabled||(i=b.offset,k.start(o))},U=o=>{if(e.disabled)return;const{deltaX:t}=k;if(k.move(o),k.isHorizontal()){r=!0,b.dragging=!0;const a=!n||t.value*i<0;a&&(0,s.PF)(o,e.stopPropagation),b.offset=(0,u.uZ)(t.value+i,-y.value,W.value)}},S=()=>{b.dragging&&(b.dragging=!1,I(b.offset>0?"left":"right"),setTimeout((()=>{r=!1}),0))},L=(t="outside")=>{o("click",t),n&&!r&&(0,d.I)(e.beforeClose,{args:[{name:e.name,position:t}],done:()=>x(t)})},T=(e,o)=>t=>{o&&t.stopPropagation(),L(e)},F=(e,o)=>{const n=t[e];if(n)return(0,a.Wm)("div",{ref:o,class:f(e),onClick:T(e,!0)},[n()])};return(0,h.F)({open:C,close:x}),(0,m.Vd)(g,(()=>L("outside")),{eventName:"touchstart"}),(0,m.OR)("touchmove",U,{target:g}),()=>{var e;const o={transform:`translate3d(${b.offset}px, 0, 0)`,transitionDuration:b.dragging?"0s":".6s"};return(0,a.Wm)("div",{ref:g,class:f(),onClick:T("cell",r),onTouchstartPassive:H,onTouchend:S,onTouchcancel:S},[(0,a.Wm)("div",{class:f("wrapper"),style:o},[F("left",v),null==(e=t.default)?void 0:e.call(t),F("right",w)])])}}});const b=(0,n.n)(w)},9722:function(e,o,t){t(1958)},9246:function(e,o,t){t(1958),t(368),t(6742),t(6585)}}]);
//# sourceMappingURL=270.5c5c9c2a.js.map